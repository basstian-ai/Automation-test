#!/bin/sh
# Prevent commits that modify roadmap/vision.md
if git diff --cached --name-only | grep -q '^roadmap/vision.md$'; then
  echo 'Error: roadmap/vision.md is protected and cannot be modified.'
  exit 1
fi

npm run format:backlog >/tmp/backlog.log && git add roadmap/new.md agent/.idmap.json || { cat /tmp/backlog.log; exit 1; }
